<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dude Simulator</title>
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div id="app">
    <header id="header">
      <span id="logo">D U D E  S I M U L A T O R</span>
      <div id="header-right">
        <div id="header-links">
          <a href="https://github.com/benkimbuilds/dude" target="_blank">GitHub</a>
          <a href="https://x.com/benkimbuilds" target="_blank">@benkimbuilds</a>
          <a href="https://ben-k.im" target="_blank">ben-k.im</a>
        </div>
        <button id="how-to-play-btn">HOW TO PLAY</button>
        <div id="connection-status">
          <span id="status-dot">â—</span>
          <span id="status-text">CONNECTING...</span>
        </div>
      </div>
    </header>

    <!-- How to Play Modal -->
    <div id="htp-overlay" class="htp-hidden">
      <div id="htp-modal">
        <div id="htp-header">
          <span>â•â•â• HOW TO PLAY â•â•â•</span>
          <button id="htp-close">&times;</button>
        </div>
        <div id="htp-content">
          <p>Dude Simulator is an <strong>MCP-controlled life simulator</strong> where you direct a little dude living in a cozy room. He has needs that decay over time â€” keep him happy by telling him what to do via MCP tools.</p>

          <h3>Connect with Claude Code</h3>
          <p>The fastest way to play. Add Dude Simulator as a remote MCP server:</p>
          <pre class="htp-code">claude mcp add dude \
  --transport http \
  http://localhost:3333/mcp</pre>
          <p>Then start Claude Code and tell it to take care of the dude:</p>
          <pre class="htp-code">claude
> Check on the dude's status and take care of his needs</pre>

          <h3>Connect with any MCP client</h3>
          <p>Add this to your MCP client config (e.g. <code>mcp.json</code>):</p>
          <pre class="htp-code">{
  "mcpServers": {
    "dude": {
      "type": "http",
      "url": "http://localhost:3333/mcp"
    }
  }
}</pre>

          <h3>Available tools</h3>
          <table class="htp-commands">
            <tr><td><code>status</code></td><td>Check stats, mood, current activity</td></tr>
            <tr><td><code>do_activity</code></td><td>Tell the dude to do something (sleep, cook, dance, etc.)</td></tr>
            <tr><td><code>stop</code></td><td>Interrupt current activity</td></tr>
            <tr><td><code>look</code></td><td>ASCII view of the room</td></tr>
            <tr><td><code>feed</code></td><td>Shortcut: cook + eat</td></tr>
            <tr><td><code>play_music</code></td><td>Set a music URL</td></tr>
            <tr><td><code>write_journal</code></td><td>Write a journal entry</td></tr>
            <tr><td><code>read_journal</code></td><td>Read past entries</td></tr>
            <tr><td><code>check_cat</code></td><td>See what the cat is up to</td></tr>
            <tr><td><code>rename</code></td><td>Give the dude a new name</td></tr>
            <tr><td><code>room_state</code></td><td>Full JSON state dump</td></tr>
          </table>

          <h3>20 activities</h3>
          <table class="htp-commands">
            <tr><td><code>sleep</code></td><td>Sleep in bed (energy +60)</td></tr>
            <tr><td><code>nap</code></td><td>Nap on couch (energy +25)</td></tr>
            <tr><td><code>play_games</code></td><td>Video games at TV (fun +40)</td></tr>
            <tr><td><code>drink_water</code></td><td>Drink at sink (thirst +30)</td></tr>
            <tr><td><code>cook_food</code></td><td>Cook in kitchen</td></tr>
            <tr><td><code>eat_food</code></td><td>Eat at table (hunger +35)</td></tr>
            <tr><td><code>pet_cat</code></td><td>Pet the cat (social +25, fun +20)</td></tr>
            <tr><td><code>take_shower</code></td><td>Shower (hygiene +50)</td></tr>
            <tr><td><code>dance</code></td><td>Dance around (fun +35)</td></tr>
            <tr><td><code>meditate</code></td><td>Meditate on yoga mat (energy +10, social +10)</td></tr>
            <tr><td><code>read_book</code></td><td>Read at bookshelf (fun +25)</td></tr>
            <tr><td><code>exercise</code></td><td>Work out (fun +15, energy -20)</td></tr>
            <tr><td><code>look_outside</code></td><td>Look out window (social +15)</td></tr>
            <tr><td><code>journal</code></td><td>Write at desk (social +20)</td></tr>
            <tr><td><code>play_music</code></td><td>Play music at desk (fun +30)</td></tr>
          </table>

          <h3>The rules</h3>
          <p>Stats decay every 3 seconds. If <strong>energy</strong> hits 0, the dude collapses and auto-sleeps. Keep all stats balanced for maximum mood. The cat wanders on its own.</p>
        </div>
        <div id="htp-footer">
          <span>Created by <a href="https://ben-k.im" target="_blank">Ben Kim</a></span>
          <a href="https://x.com/benkimbuilds" target="_blank">@benkimbuilds</a>
          <a href="https://github.com/benkimbuilds/dude" target="_blank">GitHub</a>
        </div>
      </div>
    </div>

    <!-- Agent Capabilities Bar -->
    <div id="capabilities-bar">
      <span class="cap-label">THE AGENT CAN:</span>
      <span class="cap-item">ğŸ›Œ put him to sleep</span>
      <span class="cap-item">ğŸ³ cook &amp; feed him</span>
      <span class="cap-item">ğŸš¿ make him shower</span>
      <span class="cap-item">ğŸ® play games</span>
      <span class="cap-item">ğŸ’ƒ make him dance</span>
      <span class="cap-item">ğŸ± pet the cat</span>
      <span class="cap-item">ğŸ§˜ meditate</span>
      <span class="cap-item">ğŸ“ write journal entries</span>
      <span class="cap-item">ğŸµ play music</span>
      <span class="cap-item">ğŸ“– read books</span>
      <span class="cap-item">ğŸ‹ï¸ exercise</span>
      <span class="cap-item">ğŸ“› rename him</span>
      <span class="cap-item">ğŸªŸ look outside</span>
      <span class="cap-item">ğŸŒ± water the plant</span>
    </div>

    <main id="main">
      <div id="canvas-panel">
        <div id="room-header">
          <span id="mood-face">(â€¢ _ â€¢) Okay</span>
          <span id="dude-name">The Dude</span>
        </div>
        <div id="canvas-wrapper">
          <canvas id="room" width="640" height="512"></canvas>
        </div>
        <div id="room-legend">
          <span class="legend-item"><span class="legend-swatch" style="background:#7b68ee"></span>Bed</span>
          <span class="legend-item"><span class="legend-swatch" style="background:#cd853f"></span>Couch</span>
          <span class="legend-item"><span class="legend-swatch" style="background:#4682b4"></span>TV</span>
          <span class="legend-item"><span class="legend-swatch" style="background:#deb887"></span>Table</span>
          <span class="legend-item"><span class="legend-swatch" style="background:#708090"></span>Kitchen</span>
          <span class="legend-item"><span class="legend-swatch" style="background:#2e8b57"></span>Plant</span>
          <span class="legend-item"><span class="legend-swatch" style="background:#9370db"></span>Yoga</span>
          <span class="legend-item"><span class="legend-swatch" style="background:#a0522d"></span>Desk</span>
          <span class="legend-item"><span class="legend-swatch" style="background:#5f9ea0"></span>Shower</span>
        </div>
      </div>

      <aside id="panel">
        <section id="info">
          <div class="panel-title">â•â•â• STATUS â•â•â•</div>
          <div id="activity-display">Idle</div>
          <div id="music-player">
            <div id="music-status"></div>
            <div id="music-embed"></div>
          </div>
        </section>
        <section id="stats">
          <div class="panel-title">â•â•â• NEEDS â•â•â•</div>
          <div class="stat-row"><label>Energy</label><div class="stat-bar"><div class="stat-fill" id="bar-energy"></div></div><span class="stat-val" id="val-energy">0</span></div>
          <div class="stat-row"><label>Hunger</label><div class="stat-bar"><div class="stat-fill" id="bar-hunger"></div></div><span class="stat-val" id="val-hunger">0</span></div>
          <div class="stat-row"><label>Thirst</label><div class="stat-bar"><div class="stat-fill" id="bar-thirst"></div></div><span class="stat-val" id="val-thirst">0</span></div>
          <div class="stat-row"><label>Fun</label><div class="stat-bar"><div class="stat-fill" id="bar-fun"></div></div><span class="stat-val" id="val-fun">0</span></div>
          <div class="stat-row"><label>Hygiene</label><div class="stat-bar"><div class="stat-fill" id="bar-hygiene"></div></div><span class="stat-val" id="val-hygiene">0</span></div>
          <div class="stat-row"><label>Social</label><div class="stat-bar"><div class="stat-fill" id="bar-social"></div></div><span class="stat-val" id="val-social">0</span></div>
        </section>
        <section id="events">
          <div class="panel-title">â•â•â• LOG â•â•â•</div>
          <div id="event-log"></div>
        </section>
      </aside>
    </main>

    <footer id="footer">
      <span>DUDE SIMULATOR v0.1.0</span>
      <span id="tick-counter">tick: 0</span>
    </footer>
  </div>

  <script>
    const htpBtn = document.getElementById('how-to-play-btn');
    const htpOverlay = document.getElementById('htp-overlay');
    const htpClose = document.getElementById('htp-close');
    htpBtn.addEventListener('click', () => htpOverlay.classList.remove('htp-hidden'));
    htpClose.addEventListener('click', () => htpOverlay.classList.add('htp-hidden'));
    htpOverlay.addEventListener('click', (e) => { if (e.target === htpOverlay) htpOverlay.classList.add('htp-hidden'); });
  </script>
  <script src="/client.js"></script>
</body>
</html>
